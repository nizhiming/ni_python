20170626：表单：
1、HTTP 请求
    HTTP协议以"请求－回复"的方式工作。客户发送请求时，可以在请求中附加数据。服务器通过解析请求，就可以获得客户传来的数据，并根据URL来提供特定的服务。
2、GET 方法
    我们在之前的项目中创建一个 search.py 文件，用于接收用户的请求：

20170626：模型
前言：上次进行安装数据库客户端时废了九牛二虎之力，仍然无法使用，今天再次测试竟然可以使用了，
    应该是最后安装mysqlclient-....whl起作用了，只是需要重启电脑才能识别；再此记下，以备以后验证。

在安装数据库时已经为了验证数据库的可用性而进行了验证性学习，再此记下步骤：
1、数据库配置：
    我们在项目的 settings.py 文件中找到 DATABASES 配置项，将其信息修改为：
    HelloWorld/HelloWorld/settings.py: 文件代码：
        DATABASES = {
            'default': {
                'ENGINE': 'django.db.backends.mysql',  # 或者使用 mysql.connector.django
                'NAME': 'test',
                'USER': 'test',
                'PASSWORD': 'test123',
                'HOST':'localhost',
                'PORT':'3306',
            }
        }
        #我的配置如下：
        DATABASES = {
                'default': {
                'ENGINE': 'django.db.backends.mysql', #和教程不同，教程使用mysl，我使用pymysql3
                'NAME': 'mysql',#os.path.join(BASE_DIR, 'db.sqlite3'),   #'test',#和教程不同，教程使用'test'
                'USER':'root',          #应该在安装数据库时生成的无密码的root用户
                'PASSWORD':'123456',    #应该在安装数据库时设置的密码
                'HOST':'localhost',     #本地地址不联网时有人建议使用：127.0.0.1
                'PORT':'3306',
            }
        }
    这里添加了中文注释，所以你需要在 HelloWorld/settings.py 文件头部添加 # -*- coding: UTF-8 -*-。
    注意：上面包含数据库名称和用户的信息，它们与 MySQL 中对应数据库和用户的设置相同。Django 根据这一设置，与 MySQL 中相应的数据库和用户连接起来。
2、定义模型：
    创建 APP
    Django规定，如果要使用模型，必须要创建一个app。我们使用以下命令创建一个 TestModel 的 app:
    django-admin.py startapp TestModel
    目录结构如下：
        HelloWorld
        |-- TestModel
        |   |-- __init__.py
        |   |-- admin.py
        |   |-- models.py
        |   |-- tests.py
        |   `-- views.py
    我们修改 TestModel/models.py 文件，代码如下：
    HelloWorld/TestModel/models.py: 文件代码：
    # models.py
    from django.db import models
     
    class Test(models.Model):
        name = models.CharField(max_length=20)
    以上的类名代表了数据库表名，且继承了models.Model，类里面的字段代表数据表中的字段(name)，数据类型则由CharField（相当于varchar）、DateField（相当于datetime）， max_length 参数限定长度。
    接下来在settings.py中找到INSTALLED_APPS这一项，如下：
    INSTALLED_APPS = (
        'django.contrib.admin',
        'django.contrib.auth',
        'django.contrib.contenttypes',
        'django.contrib.sessions',
        'django.contrib.messages',
        'django.contrib.staticfiles',
        'TestModel',               # 添加此项
    )
    在命令行中运行：
    $ python manage.py migrate   # 创建表结构

    $ python manage.py makemigrations TestModel  # 让 Django 知道我们在我们的模型有一些变更
    $ python manage.py migrate TestModel   # 创建表结构
    看到几行 "Creating table…" 的字样，你的数据表就创建好了。
    Creating tables ...
    ……
    Creating table TestModel_test  #我们自定义的表
    ……
    注：我一直没有走到这一步，一直没有出现“Creating table…”，只是后来加上第3、4步后，和安装成功数据库后出现了第四步的结果；在此记下，以备后验。
    表名组成结构为：应用名_类名（如：TestModel_test）。
    注意：尽管我们没有在models给表设置主键，但是Django会自动添加一个id作为主键。
3、数据库操作：
    接下来我们在 HelloWorld 目录中添加 testdb.py 文件（下面介绍），并修改 urls.py：
    HelloWorld/HelloWorld/urls.py: 文件代码：
    from django.conf.urls import *
    from . import view,testdb
     
    urlpatterns = [
        url(r'^hello$', view.hello),
        url(r'^testdb$', testdb.testdb),
    ]

4、添加数据库：
    添加数据需要先创建对象，然后再执行 save 函数，相当于SQL中的INSERT：
    HelloWorld/HelloWorld/testdb.py: 文件代码：
    # -*- coding: utf-8 -*-
     
    from django.http import HttpResponse
     
    from TestModel.models import Test
     
    # 数据库操作
    def testdb(request):
        test1 = Test(name='runoob')
        test1.save()
        return HttpResponse("<p>数据添加成功！</p>")
    访问 http://127.0.0.1:8000/testdb 就可以看到数据添加成功的提示。
    输出结果如下：数据添加成功！
    注：完成了此步。
    备注：访问http://127.0.0.1:8000/testdb前必须运行服务器：python manage.py runserver 0.0.0.0:8000
    
5、获取数据：
    通过objects这个模型管理器的all()获得所有数据行，相当于SQL中的SELECT*FROM
    filter相当于SQL中的WHERE，可设置条件过滤结果
    获取单个对象get
6、更新数据：
    修改数据可以使用 save() 或 update():
7、删除数据：
    删除数据库中的对象只需要调用该对象的delete()
    
20170623：模型
1、安装mysql驱动，命令安装：
	sudo pip install mysqlclient
	安装没有反应；
	之后使用：pip install mysql-python 
	安装失败，提示error:Microsoft Visual C++ 14.0 is required.get it with "Microsoft Visual C++ Build tool":http://landinghub.visualstudio.com/vidual-cppcbuild-tools
	使用：easy_install pymysql3
	安装成功，pymysql3-0.5-py3.6.egg
    仍然不能如教程测试程序，单独测试pymysql是安装成功的；
    下载mysql-5.7.18-winx64
        下载地址：https://www.mysql.com/downloads/
        对应Windows 系统版本选择下载，下面两个是测试版本，忽略。 

        2. 下载好的 zip 文件解压到想要安装的目录
            \bin    \docs   \include    \lib    \share  COPYING README
        3. 配置环境变量，就是添加 bin 文件的路径到系统变量 Path。
        4. 用管理员权限进入 bin 目录，执行 mysqld --initialize-insecure 初始化目录，生成无密码的 root 用户。
        5. 然后输入 mysqld -install 注册MySQL 服务
            注：在配置过程中若发现有 “计算机中丢失 MSVCR120.dll ” 之类的系统错误，自行下载相匹配的 VC++ 运行库。
        6. 启动 MySQL 服务 net start mysql
        7. 设置密码 mysqladmin -u root password 123456
        8. 使用密码登录 MySQL
        9. 到这里，MySQL 配置就完成了
            如果想要退出 MySQL ，使用命令：exit
            如果想移除 MySQL ，使用命令：mysqld --remove
    成功安装MySQL仍不能使用；
    仍需要安装client，在http://www.lfd.uci.edu/~gohlke/pythonlibs/#mysqlclient下载对应版本的MySQLclient
    并拷到Python安装目录中
    使用：pip install mysqlclient-....whl
    安装成功；注意文件后缀要加上

2、数据库配置

20170622:模板
1、模板应用实例
我们接着上一章节的项目将在 HelloWorld 目录底下创建 templates 目录并建立 hello.html文件，整个目录结构如下：
HelloWorld/
|-- HelloWorld
|   |-- __init__.py
|   |-- __init__.pyc
|   |-- settings.py
|   |-- settings.pyc
|   |-- urls.py
|   |-- urls.pyc
|   |-- view.py
|   |-- view.pyc
|   |-- wsgi.py
|   `-- wsgi.pyc
|-- manage.py
`-- templates
    `-- hello.html
hello.html 文件代码如下：
HelloWorld/templates/hello.html 文件代码：
<h1>{{ hello }}</h1>
从模板中我们知道变量使用了双括号。
接下来我们需要向Django说明模板文件的路径，修改HelloWorld/settings.py，修改 TEMPLATES 中的 DIRS 为 [BASE_DIR+"/templates",]，如下所示:
HelloWorld/HelloWorld/settings.py 文件代码：
...TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [BASE_DIR+"/templates",],       # 修改位置
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]
...
我们现在修改 view.py，增加一个新的对象，用于向模板提交数据：
HelloWorld/HelloWorld/view.py 文件代码：
# -*- coding: utf-8 -*-
 
#from django.http import HttpResponse
from django.shortcuts import render
 
def hello(request):
    context          = {}
    context['hello'] = 'Hello World!'
    return render(request, 'hello.html', context)
可以看到，我们这里使用 render 来替代之前使用的 HttpResponse。render 还使用了一个字典 context 作为参数。
context 字典中元素的键值 "hello" 对应了模板中的变量 "{{ hello }}"。
再访问访问 http://127.0.0.1:8000/hello，可以看到页面：hello word!
这样我们就完成了使用模板来输出数据，从而实现数据与视图分离。
2、Django 模板标签
if/else 标签
基本语法格式如下：
{% if condition %}
     ... display
{% endif %}
或者：
{% if condition1 %}
   ... display 1
{% elif condition2 %}
   ... display 2
{% else %}
   ... display 3
{% endif %}
根据条件判断是否输出。if/else 支持嵌套。
{% if %} 标签接受 and ， or 或者 not 关键字来对多个变量做判断 ，或者对变量取反（ not )，例如：
{% if athlete_list and coach_list %}
     athletes 和 coaches 变量都是可用的。
{% endif %}
for 标签
{% for %} 允许我们在一个序列上迭代。
与Python的 for 语句的情形类似，循环语法是 for X in Y ，Y是要迭代的序列而X是在每一个特定的循环中使用的变量名称。
每一次循环中，模板系统会渲染在 {% for %} 和 {% endfor %} 之间的所有内容。
例如，给定一个运动员列表 athlete_list 变量，我们可以使用下面的代码来显示这个列表：
<ul>
{% for athlete in athlete_list %}
    <li>{{ athlete.name }}</li>
{% endfor %}
</ul>
给标签增加一个 reversed 使得该列表被反向迭代：
{% for athlete in athlete_list reversed %}
...
{% endfor %}
可以嵌套使用 {% for %} 标签：
{% for athlete in athlete_list %}
    <h1>{{ athlete.name }}</h1>
    <ul>
    {% for sport in athlete.sports_played %}
        <li>{{ sport }}</li>
    {% endfor %}
    </ul>
{% endfor %}
ifequal/ifnotequal 标签
{% ifequal %} 标签比较两个值，当他们相等时，显示在 {% ifequal %} 和 {% endifequal %} 之中所有的值。
下面的例子比较两个模板变量 user 和 currentuser :
{% ifequal user currentuser %}
    <h1>Welcome!</h1>
{% endifequal %}
和 {% if %} 类似， {% ifequal %} 支持可选的 {% else%} 标签：8
{% ifequal section 'sitenews' %}
    <h1>Site News</h1>
{% else %}
    <h1>No News Here</h1>
{% endifequal %}
注释标签
Django 注释使用 {# #}。
{# 这是一个注释 #}
过滤器
模板过滤器可以在变量被显示前修改它，过滤器使用管道字符，如下所示：
{{ name|lower }}
{{ name }} 变量被过滤器 lower 处理后，文档大写转换文本为小写。
过滤管道可以被* 套接* ，既是说，一个过滤器管道的输出又可以作为下一个管道的输入：
{{ my_list|first|upper }}
以上实例将第一个元素并将其转化为大写。
有些过滤器有参数。 过滤器的参数跟随冒号之后并且总是以双引号包含。 例如：
{{ bio|truncatewords:"30" }}
这个将显示变量 bio 的前30个词。
其他过滤器：
addslashes : 添加反斜杠到任何反斜杠、单引号或者双引号前面。
date : 按指定的格式字符串参数格式化 date 或者 datetime 对象，实例：
{{ pub_date|date:"F j, Y" }}
length : 返回变量的长度。
include 标签
{% include %} 标签允许在模板中包含其它的模板的内容。
下面这个例子都包含了 nav.html 模板：
{% include "nav.html" %}
模板继承
模板可以用继承的方式来实现复用。
接下来我们先创建之前项目的 templates 目录中添加 base.html 文件，代码如下：
HelloWorld/templates/base.html 文件代码：
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>菜鸟教程(runoob.com)</title>
</head>
<body>
    <h1>Hello World!</h1>
    <p>菜鸟教程 Django 测试。</p>
    {% block mainbody %}
       <p>original</p>
    {% endblock %}
</body>
</html>
以上代码中，名为 mainbody 的 block 标签是可以被继承者们替换掉的部分。
所有的 {% block %} 标签告诉模板引擎，子模板可以重载这些部分。
hello.html 中继承 base.html，并替换特定 block，hello.html 修改后的代码如下：
HelloWorld/templates/hello.html 文件代码：
{% extends "base.html" %}
 
{% block mainbody %}<p>继承了 base.html 文件</p>
{% endblock %}
第一行代码说明 hello.html 继承了 base.html 文件。可以看到，这里相同名字的 block 标签用以替换 base.html 的相应 block。
重新访问地址 http://127.0.0.1:8000/hello，输出结果如下：
	hello word！
	菜鸟教程 Django 测试。
	继承了 base.html 文件

20170622:网站架构：
1、创建网站的实例；
2、使用django web架构；
3、下载django工具包；

20170622:创建一个项目：
1、解压到Python安装目录下，在cmd里进入Django所在的目录，运行python setup.py install，然后开始安装，Django将要被安装到Python的Lib下site-packages；
2、把django-admin.py拷贝到到建web的目录下；
3、cmd进入到要建web工程的目录下使用：Python django-admin.py ni_Web 创建ni_Web项目；
4、创建完成后我们可以查看下项目的目录结构：
	$ cd HelloWorld/
	$ tree
	.
	|-- HelloWorld
	|   |-- __init__.py
	|   |-- settings.py
	|   |-- urls.py
	|   `-- wsgi.py
	`-- manage.py
	目录说明：
	HelloWorld: 项目的容器。
	manage.py: 一个实用的命令行工具，可让你以各种方式与该 Django 项目进行交互。
	HelloWorld/__init__.py: 一个空文件，告诉 Python 该目录是一个 Python 包。
	HelloWorld/settings.py: 该 Django 项目的设置/配置。
	HelloWorld/urls.py: 该 Django 项目的 URL 声明; 一份由 Django 驱动的网站"目录"。
	HelloWorld/wsgi.py: 一个 WSGI 兼容的 Web 服务器的入口，以便运行你的项目。
5、接下来我们进入 HelloWorld 目录输入以下命令，启动服务器：
	python manage.py runserver 0.0.0.0:8000
    注:退出服务器使用Ctrl+break按键
	0.0.0.0 让其它电脑可连接到开发服务器，8000 为端口号。如果不说明，那么端口号默认为 8000。
	在浏览器输入你服务器的ip及端口号，如果正常启动，输出结果如下：It Work!
6、视图和 URL 配置
	在先前创建的 HelloWorld 目录下的 HelloWorld 目录新建一个 view.py 文件，并输入代码：
	HelloWorld/HelloWorld/view.py 文件代码：
	from django.http import HttpResponse
 
	def hello(request):
		return HttpResponse("Hello world ! ")
	接着，绑定 URL 与视图函数。打开 urls.py 文件，删除原来代码，将以下代码复制粘贴到 urls.py 文件中：
	HelloWorld/HelloWorld/urls.py 文件代码：
	from django.conf.urls import url
 
	from . import view
 
	urlpatterns = [
		url(r'^$', view.hello),
	]
	整个目录结构如下：
	$ tree
	.
	|-- HelloWorld
	|   |-- __init__.py
	|   |-- __init__.pyc
	|   |-- settings.py
	|   |-- settings.pyc
	|   |-- urls.py              # url 配置
	|   |-- urls.pyc
	|   |-- view.py              # 添加的视图文件
	|   |-- view.pyc             # 编译后的视图文件
	|   |-- wsgi.py
	|   `-- wsgi.pyc
	`-- manage.py
	完成后，启动 Django 开发服务器，并在浏览器访问打开浏览器并访问：ni_Web
7、url() 函数
	Django url() 可以接收四个参数，分别是两个必选参数：regex、view 和两个可选参数：kwargs、name，接下来详细介绍这四个参数。
		regex: 正则表达式，与之匹配的 URL 会执行对应的第二个参数 view。
		view: 用于执行与正则表达式匹配的 URL 请求。
		kwargs: 视图使用的字典类型的参数。
		name: 用来反向获取 URL。